<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Полная Обобщенная Таблица Примитивов (39 Atoms)</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f6f8;
            color: #333;
            margin: 0;
            padding: 40px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 2px solid #eee;
            padding-bottom: 15px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 40px;
            font-size: 14px;
        }
        th, td {
            padding: 10px 12px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }
        thead th {
            background-color: #f1f3f5;
            color: #555;
            font-weight: 700;
        }
        /* Нумерация из оригинальной таблицы v2 */
        .num-col {
            color: #888;
            font-weight: bold;
            width: 40px;
            text-align: center;
        }
        .id-col {
            font-family: 'Consolas', monospace;
            font-weight: bold;
            color: #2c3e50;
            width: 160px;
        }
        .pattern {
            font-family: 'Consolas', monospace;
            color: #d63384;
            background: #fff0f6;
            padding: 3px 6px;
            border-radius: 4px;
        }
        .result {
            font-family: 'Consolas', monospace;
            color: #0d6efd;
            background: #f0f7ff;
            padding: 3px 6px;
            border-radius: 4px;
        }
        .section-header td {
            background-color: #e9ecef;
            color: #333;
            font-weight: bold;
            font-size: 1.1em;
            padding: 12px;
            text-align: center;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Полная Таблица Примитивов (39 Атомов)</h1>
    <p>Все правила переведены в алгебраические шаблоны: <code>a</code>, <code>b</code>, <code>c</code>, <code>d</code> — любые выражения.</p>

    <table>
        <thead>
            <tr>
                <th class="num-col">№</th>
                <th>ID</th>
                <th>Шаблон (Pattern)</th>
                <th>Результат (Result)</th>
                <th>Условие (Condition)</th>
            </tr>
        </thead>
        <tbody>
            <tr class="section-header"><td colspan="5">A. Целые числа (Integers)</td></tr>
            <tr>
                <td class="num-col">1</td>
                <td class="id-col">P.INT_ADD</td>
                <td><span class="pattern">a + b</span></td>
                <td><span class="result">calc(a+b)</span></td>
                <td>a, b ∈ Int</td>
            </tr>
            <tr>
                <td class="num-col">2</td>
                <td class="id-col">P.INT_SUB</td>
                <td><span class="pattern">a - b</span></td>
                <td><span class="result">calc(a-b)</span></td>
                <td>a, b ∈ Int</td>
            </tr>
            <tr>
                <td class="num-col">3</td>
                <td class="id-col">P.INT_MUL</td>
                <td><span class="pattern">a · b</span></td>
                <td><span class="result">calc(a·b)</span></td>
                <td>a, b ∈ Int</td>
            </tr>
            <tr>
                <td class="num-col">4</td>
                <td class="id-col">P.INT_DIV_EXACT</td>
                <td><span class="pattern">a / b</span></td>
                <td><span class="result">calc(a/b)</span></td>
                <td>a % b == 0</td>
            </tr>
            <tr>
                <td class="num-col">5</td>
                <td class="id-col">P.INT_DIV_FRAC</td>
                <td><span class="pattern">a / b</span></td>
                <td><span class="result">a / b</span> (Drob)</td>
                <td>a % b != 0</td>
            </tr>

            <tr class="section-header"><td colspan="5">B. Обыкновенные дроби (Fractions)</td></tr>
            <tr>
                <td class="num-col">6</td>
                <td class="id-col">P.FRAC_ADD_SAME</td>
                <td><span class="pattern">a/c + b/c</span></td>
                <td><span class="result">(a + b) / c</span></td>
                <td>Знаменатели равны</td>
            </tr>
            <tr>
                <td class="num-col">7</td>
                <td class="id-col">P.FRAC_SUB_SAME</td>
                <td><span class="pattern">a/c - b/c</span></td>
                <td><span class="result">(a - b) / c</span></td>
                <td>Знаменатели равны</td>
            </tr>
            <tr>
                <td class="num-col">8</td>
                <td class="id-col">P.FRAC_MUL</td>
                <td><span class="pattern">a/b · c/d</span></td>
                <td><span class="result">(a·c) / (b·d)</span></td>
                <td>—</td>
            </tr>
            <tr>
                <td class="num-col">9</td>
                <td class="id-col">P.FRAC_DIV</td>
                <td><span class="pattern">a/b ÷ c/d</span></td>
                <td><span class="result">a/b · d/c</span></td>
                <td>Замена деления на умножение</td>
            </tr>

            <tr class="section-header"><td colspan="5">C. Десятичные дроби (Decimals)</td></tr>
            <tr>
                <td class="num-col">10</td>
                <td class="id-col">P.DEC_ADD</td>
                <td><span class="pattern">a + b</span></td>
                <td><span class="result">calc(a+b)</span></td>
                <td>a|b ∈ Decimal</td>
            </tr>
            <tr>
                <td class="num-col">11</td>
                <td class="id-col">P.DEC_SUB</td>
                <td><span class="pattern">a - b</span></td>
                <td><span class="result">calc(a-b)</span></td>
                <td>a|b ∈ Decimal</td>
            </tr>
            <tr>
                <td class="num-col">12</td>
                <td class="id-col">P.DEC_MUL</td>
                <td><span class="pattern">a · b</span></td>
                <td><span class="result">calc(a·b)</span></td>
                <td>a|b ∈ Decimal</td>
            </tr>
            <tr>
                <td class="num-col">13</td>
                <td class="id-col">P.DEC_DIV</td>
                <td><span class="pattern">a / b</span></td>
                <td><span class="result">calc(a/b)</span></td>
                <td>a|b ∈ Decimal</td>
            </tr>

            <tr class="section-header"><td colspan="5">D. Смешанные типы (Mixed)</td></tr>
            <tr>
                <td class="num-col">14</td>
                <td class="id-col">P.INT_PLUS_FRAC</td>
                <td><span class="pattern">a + b/c</span></td>
                <td><span class="result">a/1 + b/c</span></td>
                <td>a ∈ Int</td>
            </tr>
            <tr>
                <td class="num-col">15</td>
                <td class="id-col">P.INT_MINUS_FRAC</td>
                <td><span class="pattern">a - b/c</span></td>
                <td><span class="result">a/1 - b/c</span></td>
                <td>a ∈ Int</td>
            </tr>

            <tr class="section-header"><td colspan="5">E. Скобки и знаки (Parens & Signs)</td></tr>
            <tr>
                <td class="num-col">16</td>
                <td class="id-col">P.PAREN_UNWRAP</td>
                <td><span class="pattern">(a + b)</span></td>
                <td><span class="result">a + b</span></td>
                <td>Если нет внешнего множителя</td>
            </tr>
            <tr>
                <td class="num-col">17</td>
                <td class="id-col">P.PAREN_SINGLE</td>
                <td><span class="pattern">((a))</span></td>
                <td><span class="result">(a)</span></td>
                <td>Лишние скобки</td>
            </tr>
            <tr>
                <td class="num-col">18</td>
                <td class="id-col">P.NEG_DIST_ADD</td>
                <td><span class="pattern">-(a + b)</span></td>
                <td><span class="result">-a - b</span></td>
                <td>Раскрытие минуса (сумма)</td>
            </tr>
            <tr>
                <td class="num-col">19</td>
                <td class="id-col">P.NEG_DIST_SUB</td>
                <td><span class="pattern">-(a - b)</span></td>
                <td><span class="result">-a + b</span></td>
                <td>Раскрытие минуса (разность)</td>
            </tr>
            <tr>
                <td class="num-col">20</td>
                <td class="id-col">P.NEG_NEG</td>
                <td><span class="pattern">-(-a)</span></td>
                <td><span class="result">a</span></td>
                <td>Минус на минус</td>
            </tr>
            <tr>
                <td class="num-col">21</td>
                <td class="id-col">P.FRAC_NEG_NUM</td>
                <td><span class="pattern">(-a)/b</span></td>
                <td><span class="result">-(a/b)</span></td>
                <td>Вынос минуса из числителя</td>
            </tr>
            <tr>
                <td class="num-col">22</td>
                <td class="id-col">P.FRAC_DEN_NEG_P</td>
                <td><span class="pattern">a/(-b)</span></td>
                <td><span class="result">a/-b</span></td>
                <td>(Промежуточный шаг для скобки)</td>
            </tr>
            <tr>
                <td class="num-col">23</td>
                <td class="id-col">P.FRAC_NEG_DEN</td>
                <td><span class="pattern">a/-b</span></td>
                <td><span class="result">-(a/b)</span></td>
                <td>Вынос минуса из знаменателя</td>
            </tr>

            <tr class="section-header"><td colspan="5">F. Операции с нулём (Zero Operations)</td></tr>
            <tr>
                <td class="num-col">24</td>
                <td class="id-col">P.ADD_ZERO_L</td>
                <td><span class="pattern">0 + a</span></td>
                <td><span class="result">a</span></td>
                <td>—</td>
            </tr>
            <tr>
                <td class="num-col">25</td>
                <td class="id-col">P.ADD_ZERO_R</td>
                <td><span class="pattern">a + 0</span></td>
                <td><span class="result">a</span></td>
                <td>—</td>
            </tr>
            <tr>
                <td class="num-col">26</td>
                <td class="id-col">P.SUB_ZERO</td>
                <td><span class="pattern">a - 0</span></td>
                <td><span class="result">a</span></td>
                <td>—</td>
            </tr>
            <tr>
                <td class="num-col">27</td>
                <td class="id-col">P.SUB_SELF</td>
                <td><span class="pattern">a - a</span></td>
                <td><span class="result">0</span></td>
                <td>—</td>
            </tr>
            <tr>
                <td class="num-col">28</td>
                <td class="id-col">P.MUL_ZERO_L</td>
                <td><span class="pattern">0 · a</span></td>
                <td><span class="result">0</span></td>
                <td>—</td>
            </tr>
            <tr>
                <td class="num-col">29</td>
                <td class="id-col">P.MUL_ZERO_R</td>
                <td><span class="pattern">a · 0</span></td>
                <td><span class="result">0</span></td>
                <td>—</td>
            </tr>
            <tr>
                <td class="num-col">30</td>
                <td class="id-col">P.FRAC_ZERO_NUM</td>
                <td><span class="pattern">0 / a</span></td>
                <td><span class="result">0</span></td>
                <td>При a != 0</td>
            </tr>
            <tr>
                <td class="num-col">31</td>
                <td class="id-col">P.DIV_ZERO_ERR</td>
                <td><span class="pattern">a / 0</span></td>
                <td><span class="result">ERROR</span></td>
                <td>Деление на ноль</td>
            </tr>

            <tr class="section-header"><td colspan="5">G. Операции с единицей (Identity Operations)</td></tr>
            <tr>
                <td class="num-col">32</td>
                <td class="id-col">P.MUL_ONE_L</td>
                <td><span class="pattern">1 · a</span></td>
                <td><span class="result">a</span></td>
                <td>Упрощение</td>
            </tr>
            <tr>
                <td class="num-col">33</td>
                <td class="id-col">P.MUL_ONE_R</td>
                <td><span class="pattern">a · 1</span></td>
                <td><span class="result">a</span></td>
                <td>Упрощение</td>
            </tr>
            <tr>
                <td class="num-col">34</td>
                <td class="id-col">P.MUL_ONE_FRAC_L</td>
                <td><span class="pattern">1 · a/b</span></td>
                <td><span class="result">a/b</span></td>
                <td>Для дробей</td>
            </tr>
            <tr>
                <td class="num-col">35</td>
                <td class="id-col">P.MUL_ONE_FRAC_R</td>
                <td><span class="pattern">a/b · 1</span></td>
                <td><span class="result">a/b</span></td>
                <td>Для дробей</td>
            </tr>
            <tr>
                <td class="num-col">36</td>
                <td class="id-col">P.DIV_